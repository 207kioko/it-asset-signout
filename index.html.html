<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IT Asset Sign-Out</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin: 16px; background:#f7fafc; color:#0f172a; }
    .container { max-width:900px; margin: 0 auto; background:white; padding:18px; box-shadow: 0 6px 18px rgba(15,23,42,0.08); border-radius:8px; }
    h1 { font-size:20px; margin:0 0 8px; }
    .grid { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    label { font-size:13px; color:#334155; display:block; margin-bottom:6px; }
    input[type="text"], input[type="date"], select, textarea { width:100%; padding:8px; border-radius:6px; border:1px solid #e2e8f0; font-size:14px; box-sizing:border-box; }
    textarea { min-height:60px; resize:vertical; }
    .full { grid-column: 1 / -1; }
    .signature-area { border:1px dashed #cbd5e1; border-radius:8px; padding:8px; background:#f8fafc; }
    #sig-canvas, #admin-canvas, .list-canvas { width:100%; touch-action:none; background:white; border-radius:6px; border:1px solid #cbd5e1; display:block; }
    .buttons { margin-top:12px; display:flex; gap:8px; flex-wrap:wrap; }
    button { padding:10px 14px; border-radius:8px; border:0; cursor:pointer; font-weight:600; }
    .btn-primary { background:#2563eb; color:white; }
    .btn-ghost { background:#e2e8f0; color:#0f172a; }
    .muted { color:#64748b; font-size:13px; margin-top:6px; }
    footer { margin-top:14px; font-size:13px; color:#475569; }
    .small { font-size:13px; color:#475569; }
    .two-line { display:flex; gap:12px; }
    .field-note { font-size:12px; color:#64748b; margin-top:4px; }
    .list-container { display:flex; gap:8px; flex-wrap:wrap; margin-bottom:8px; }
    .list-container input { flex:1; }
    @media (max-width:700px) { .grid{ grid-template-columns: 1fr; } .two-line{ flex-direction:column; } }
  </style>
</head>
<body>
<div class="container">
 
  <h1>IT Asset Sign-Out Form </h1>
  <p class="muted">Fill details, sign below using finger / mouse or type name, then generate PDF to download.</p>

  <form id="assetForm" onsubmit="return false;">
    <div class="grid">
      <div>
        <label>Employee Name</label>
        <input type="text" id="emp_name" placeholder="Full name" />
      </div>
      <div>
        <label>Department</label>
        <input type="text" id="department" placeholder="Department" />
      </div>

      <div>
        <label>Date of Joining</label>
        <input type="date" id="doj" />
      </div>
      <div>
        <label>Employment Type</label>
        <select id="emp_type">
          <option value="">Select</option>
          <option>Permanent</option>
          <option>Contract</option>
          <option>Intern</option>
          <option>Other</option>
        </select>
      </div>

      <div>
        <label>Designation</label>
        <input type="text" id="designation" placeholder="e.g. IT Support" />
      </div>
      <div>
        <label>Previously Used By </label>
        <input type="text" id="prev_emp_name" placeholder="Previous employee name" />
      </div>

      <div>
        <label>Previous user Company </label>
        <input type="text" id="prev_company" />
      </div>
      <div>
        <label>Previous user Department</label>
        <input type="text" id="prev_department" />
      </div>

      <div class="full">
        <label>Asset Descriptions (up to 5 — separate them)</label>
        <textarea id="asset_desc" placeholder="e.g. Laptop: Dell Latitude 5420; Charger; Bag"></textarea>
      </div>

      <!-- Serial Numbers as List -->
      <div class="full">
        <label>Serial Numbers</label>
        <div id="serialList" class="list-container">
          <input type="text" placeholder="Enter serial number" />
        </div>
        <button type="button" onclick="addSerialField()" class="btn-ghost">Add Another Serial</button>
      </div>

      <!-- Inventory Numbers as List -->
      <div class="full">
        <label>Inventory Numbers</label>
        <div id="invList" class="list-container">
          <input type="text" placeholder="Enter inventory number" />
        </div>
        <button type="button" onclick="addInvField()" class="btn-ghost">Add Another Inventory Number</button>
      </div>

      <div>
        <label>Date Returned (if any)</label>
        <input type="date" id="date_returned" />
      </div>
      <div>
        <label>Date Issued</label>
        <input type="date" id="date_issued" />
      </div>

      <!-- Signatures -->
      <div class="full">
        <label>Signatures</label>
        <div class="signature-area">
          <div class="two-line" style="align-items:center; justify-content:space-between;">

            <!-- Employee Signature -->
            <div style="flex:1; margin-right:8px;">
              <div class="small">Employee signature (draw or type)</div>
              <canvas id="sig-canvas"></canvas>
              <input type="text" id="typedSig" placeholder="Type your signature here" style="margin-top:6px;"/>
              <button type="button" onclick="generateTypedSignature()" class="btn-ghost" style="margin-top:4px;">Generate Signature</button>
              <div class="buttons" style="margin-top:8px;">
                <button type="button" id="clear-sign" class="btn-ghost">Clear signature</button>
                <button type="button" id="undo-sign" class="btn-ghost">Undo stroke</button>
              </div>
            </div>

            <!-- Admin Signature -->
            <div style="width:220px;">
              <label>Administrator Name</label>
              <input type="text" id="admin_name" />
              <div style="margin-top:12px;">
                <div class="small">Administrator signature (draw or type, optional)</div>
                <canvas id="admin-canvas" style="height:80px; margin-top:6px;"></canvas>
                <input type="text" id="typedAdminSig" placeholder="Type admin signature" style="margin-top:6px;"/>
                <button type="button" onclick="generateTypedAdminSignature()" class="btn-ghost" style="margin-top:4px;">Generate Signature</button>
                <div class="buttons" style="margin-top:8px;">
                  <button type="button" id="clear-admin" class="btn-ghost">Clear admin sig</button>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>

    </div>

    <div class="buttons" style="margin-top:14px;">
      <button id="generate" class="btn-primary">Generate PDF</button>
      <button id="reset" class="btn-ghost" type="button">Reset Form</button>
    </div>

    <p class="field-note">Tip: On mobile open the page in the browser, fill, then tap "Generate PDF".</p>
  </form>

  <footer>
    <div>Built for Burhani Engineers Limited — IT Asset Sign-Out</div>
  </footer>
</div>

<!-- External libraries -->
<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<script>
  // Canvas Setup
  const sigCanvas = document.getElementById('sig-canvas');
  const adminCanvas = document.getElementById('admin-canvas');

  function fitCanvas(canvas, heightPx=200){
    const ratio = Math.max(window.devicePixelRatio || 1, 1);
    canvas.style.width = '100%';
    canvas.style.height = heightPx + 'px';
    const rect = canvas.getBoundingClientRect();
    canvas.width = Math.round(rect.width * ratio);
    canvas.height = Math.round(rect.height * ratio);
    const ctx = canvas.getContext('2d');
    ctx.scale(ratio, ratio);
    ctx.fillStyle = '#fff';
    ctx.fillRect(0,0,rect.width, rect.height);
  }

  function fitAll(){ fitCanvas(sigCanvas,200); fitCanvas(adminCanvas,100); }
  window.addEventListener('resize', fitAll);
  fitAll();

  const signaturePad = new SignaturePad(sigCanvas, { backgroundColor: 'rgba(255,255,255,0)', penColor:'black' });
  const adminPad = new SignaturePad(adminCanvas, { backgroundColor: 'rgba(255,255,255,0)', penColor:'black' });

  document.getElementById('clear-sign').addEventListener('click',()=>signaturePad.clear());
  document.getElementById('undo-sign').addEventListener('click', ()=>{
    const data = signaturePad.toData();
    if(data.length){ data.pop(); signaturePad.fromData(data); }
  });
  document.getElementById('clear-admin').addEventListener('click',()=>adminPad.clear());

  // Typed Signatures
  function generateTypedSignature(){
    const text = document.getElementById('typedSig').value;
    const ctx = sigCanvas.getContext('2d');
    ctx.clearRect(0,0,sigCanvas.width,sigCanvas.height);
    ctx.font = "30px 'Brush Script MT', cursive";
    ctx.fillStyle='black';
    ctx.textBaseline='middle';
    ctx.textAlign='center';
    ctx.fillText(text, sigCanvas.width/2, sigCanvas.height/2);
  }

  function generateTypedAdminSignature(){
    const text = document.getElementById('typedAdminSig').value;
    const ctx = adminCanvas.getContext('2d');
    ctx.clearRect(0,0,adminCanvas.width,adminCanvas.height);
    ctx.font = "24px 'Brush Script MT', cursive";
    ctx.fillStyle='black';
    ctx.textBaseline='middle';
    ctx.textAlign='center';
    ctx.fillText(text, adminCanvas.width/2, adminCanvas.height/2);
  }

  // Add list inputs
  function addSerialField(){
    const div = document.getElementById('serialList');
    const input = document.createElement('input');
    input.type='text';
    input.placeholder='Enter serial number';
    div.appendChild(input);
  }

  function addInvField(){
    const div = document.getElementById('invList');
    const input = document.createElement('input');
    input.type='text';
    input.placeholder='Enter inventory number';
    div.appendChild(input);
  }

  function getVal(id){ return (document.getElementById(id).value || '').toString(); }
  function getListValues(containerId){
    return Array.from(document.getElementById(containerId).querySelectorAll('input')).map(i=>i.value).filter(v=>v).join(', ');
  }

  // Generate PDF
  document.getElementById('generate').addEventListener('click', ()=>{
    const data = {
      emp_name: getVal('emp_name'),
      department: getVal('department'),
      doj: getVal('doj'),
      emp_type: getVal('emp_type'),
      designation: getVal('designation'),
      prev_emp_name: getVal('prev_emp_name'),
      prev_company: getVal('prev_company'),
      prev_department: getVal('prev_department'),
      asset_desc: getVal('asset_desc'),
      serials: getListValues('serialList'),
      inv_nums: getListValues('invList'),
      date_returned: getVal('date_returned'),
      date_issued: getVal('date_issued'),
      admin_name: getVal('admin_name')
    };

    const { jsPDF } = window.jspdf;
    const doc = new jsPDF({unit:'pt',format:'a4'});
    const margin=40;
    let y=50;
    const pageWidth = doc.internal.pageSize.getWidth();

    doc.setFontSize(16);
    doc.text("IT Asset Sign Out Form - Burhani Engineers Ltd", margin, y);
    y+=20;
    doc.setFontSize(11);

    function writeRow(label,value){ 
      doc.setFont(undefined,'bold'); doc.text(label+":", margin, y);
      doc.setFont(undefined,'normal');
      const split = doc.splitTextToSize(value||"-", pageWidth-margin*2-140);
      doc.text(split, margin+140, y);
      y += 14*split.length +6;
    }

    writeRow("Employee Name", data.emp_name);
    writeRow("Department", data.department);
    writeRow("Date of Joining", data.doj);
    writeRow("Employment Type", data.emp_type);
    writeRow("Designation", data.designation);

    doc.setFont(undefined,'bold'); doc.text("Previously Used By", margin, y); y+=14;
    writeRow("Employee Name", data.prev_emp_name);
    writeRow("Company", data.prev_company);
    writeRow("Department", data.prev_department);

    doc.setFont(undefined,'bold'); doc.text("Assets / Description", margin, y); y+=14;
    const desc = doc.splitTextToSize(data.asset_desc||"-", pageWidth-margin*2);
    doc.setFont(undefined,'normal'); doc.text(desc, margin, y); y+=14*desc.length +6;

    writeRow("Serial Numbers", data.serials);
    writeRow("Inventory Numbers", data.inv_nums);
    writeRow("Date Returned", data.date_returned);
    writeRow("Date Issued", data.date_issued);

    y+=18; doc.setFont(undefined,'bold'); doc.text("Signatures", margin, y); y+=14;

    // Employee signature
    if(!signaturePad.isEmpty()){
      const sigDataUrl = sigCanvas.toDataURL('image/png');
      doc.text("Employee Signature:", margin, y+12);
      doc.addImage(sigDataUrl,'PNG',margin+140,y-2,200,60);
    } else {
      doc.text("Employee Signature: (not provided)", margin, y);
    }
    y+=80;

    // Admin signature
    doc.text("Administrator Name:", margin, y);
    doc.text(data.admin_name||"-", margin+140, y); y+=20;
    if(!adminPad.isEmpty()){
      const adminSig = adminCanvas.toDataURL('image/png');
      doc.addImage(adminSig,'PNG',margin, y,160,46); y+=60;
    } else { doc.text("Administrator Signature: (not provided)", margin, y); y+=30; }

    doc.setFontSize(9);
    doc.text("This document was generated digitally. Burhani Engineers Limited retains ownership of assets issued during employment.", margin, doc.internal.pageSize.getHeight()-60);

    const filename = `${(data.emp_name||"employee").replace(/\s+/g,'_')}_IT_Asset_Signout_${(data.date_issued||new Date().toISOString().slice(0,10))}.pdf`;
    doc.save(filename);
  });

  document.getElementById('reset').addEventListener('click',()=>{
    document.getElementById('assetForm').reset();
    signaturePad.clear();
    adminPad.clear();
  });
</script>
</body>
</html>
